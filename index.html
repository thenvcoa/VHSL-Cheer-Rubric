<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>NVCOA Cheer Coaches Full Form + Rubric</title>
<style>
  body { font-family: Arial, sans-serif; margin: 30px; background: #fafafa; }
  h1 { color: #800000; }
  label { display: block; margin-top: 15px; font-weight: bold; }
  input, select, textarea { width: 90%; max-width: 600px; padding: 8px; margin-top: 5px; }
  button { margin-top: 25px; padding: 10px 16px; background: #800000; color: white; border: none; border-radius: 5px; cursor: pointer; }
  button:hover { background: #a00000; }
  .wrapper { position: relative; display: inline-block; margin-top: 20px; }
  #rubricImage { width: 90%; max-width: 950px; display: block; }
  .highlight { position: absolute; border: 2px solid transparent; background-color: transparent; pointer-events: none; display: none; }
  .twisting { border-color: rgba(255,0,0,0.8); background-color: rgba(255,0,0,0.25); }
  .coed     { border-color: rgba(0,0,255,0.8); background-color: rgba(0,0,255,0.25); }
  .release  { border-color: rgba(0,180,0,0.8); background-color: rgba(0,180,0,0.25); }
  .inversion{ border-color: rgba(180,0,180,0.8); background-color: rgba(180,0,180,0.25); }
  .toss     { border-color: rgba(255,120,0,0.8); background-color: rgba(255,120,0,0.25); }

  /* Draggable Row Styles */
  .draggable-row { transition: background 0.2s; display: flex; align-items: center; }
  .dragging { opacity: 0.4; }
  .drag-over { border-top: 3px solid #800000; }

  /* Table styles */
  #skillCountsTable {
    border-collapse: collapse;
    width: 90%;
    max-width: 600px;
    margin-top: 15px;
  }

  #skillCountsTable th, #skillCountsTable td {
    padding: 6px 10px;
    vertical-align: middle;
  }

  #skillCountsTable th {
    background-color: #f0f0f0;
    text-align: left;
  }

  #skillCountsTable td {
    display: flex;
    align-items: center;
  }

  #skillCountsTable td:first-child {
    flex: 1; /* skill name column stretches */
    cursor: grab;
  }

  #skillCountsTable td input.skillCount {
    width: 60px; 
    padding: 4px;
    font-size: 14px;
    text-align: center;
    margin-right: 10px;
  }

  #skillCountsTable td button {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 16px;
    padding: 0;
  }

  #skillCountsTable td button:hover {
    color: red;
  }
</style>
</head>
<body>

<h1>NVCOA Cheer Coaches Rubric + Full Form</h1>

<form id="fullForm" action="https://docs.google.com/forms/d/e/1FAIpQLSfQ3lyxpqbB0ej3RfpUok4s02UNwSfFExRDta7rATeTuqEg2g/formResponse" method="POST" target="hidden_iframe">

  <!-- Google Form Fields -->
  <label>School Name</label>
  <input type="text" id="schoolName">

  <label>Team Level</label>
  <select id="teamLevel">
    <option value="">--Select--</option>
    <option value="Varsity">Varsity</option>
    <option value="Junior Varsity">Junior Varsity</option>
  </select>

  <label>Number of Athletes Performing</label>
  <input type="number" id="numAthletes" min="1">

  <label>Competition Location</label>
  <input type="text" id="competitionLocation">

  <label>Competition Date</label>
  <input type="date" id="competitionDate">

  <label>Intended Stunt Range</label>
  <select id="stuntRange">
    <option value="">--Select--</option>
    <option>Beginner: 0.0 - 1.0</option>
    <option>Intermediate: 1.25 - 3.25</option>
    <option>Advanced: 3.5 - 5.5</option>
    <option>Elite: 5.75 - 7.75</option>
    <option>Super Elite: 8.0 - 10.0</option>
  </select>

  <h2>Stunt Skills Rubric</h2>
  <p>Click on the rubric image to select skills. Each click creates a new entry.</p>

  <div class="wrapper">
    <img id="rubricImage" src="Stunt_Rubric.png" alt="VHSL Rubric">
    <!-- Highlight boxes -->
    <div class="highlight inversion" id="i1" style="left:62px; top:131px; width:146px; height:17px;"></div>
    <div class="highlight inversion" id="i2" style="left:62px; top:150px; width:146px; height:18px;"></div>
    <div class="highlight inversion" id="i3" style="left:62px; top:169px; width:146px; height:17px;"></div>
    <div class="highlight inversion" id="i4" style="left:209px; top:131px; width:146px; height:17px;"></div>

    <div class="highlight release" id="r1" style="left:62px; top:217px; width:146px; height:15px;"></div>
    <div class="highlight release" id="r2" style="left:62px; top:233px; width:146px; height:13px;"></div>
    <div class="highlight release" id="r3" style="left:62px; top:280px; width:146px; height:14px;"></div>

    <div class="highlight twisting" id="t1" style="left:62px; top:335px; width:146px; height:7px;"></div>
    <div class="highlight twisting" id="t2" style="left:62px; top:342px; width:146px; height:14px;"></div>
    <div class="highlight twisting" id="t3" style="left:62px; top:356px; width:146px; height:15px;"></div>

    <div class="highlight coed" id="c1" style="left:62px; top:410px; width:146px; height:14px;"></div>
    <div class="highlight coed" id="c2" style="left:62px; top:439px; width:146px; height:15px;"></div>
    <div class="highlight coed" id="c3" style="left:62px; top:455px; width:146px; height:15px;"></div>

    <div class="highlight toss" id="o1" style="left:62px; top:555px; width:146px; height:15px;"></div>
    <div class="highlight toss" id="o2" style="left:62px; top:582px; width:146px; height:21px;"></div>
    <div class="highlight toss" id="o3" style="left:62px; top:600px; width:146px; height:15px;"></div>

    <div class="highlight inversion" id="h1" style="left:140px; top:550px; width:180px; height:20px;"></div>
    <div class="highlight release" id="h2" style="left:330px; top:550px; width:180px; height:20px;"></div>
    <div class="highlight twisting" id="h3" style="left:630px; top:550px; width:180px; height:20px;"></div>
  </div>

<p><strong>
Enter the number of groups for each skill. 
<span style="color: hotpink;">Please list skills in order of performance.</span> 
Use the ‚áÖ icon to reorder or the üóëÔ∏è icon to delete.
</strong></p>
  
  <!-- Drag & drop table -->
  <table id="skillCountsTable">
    <thead>
      <tr>
        <th style="width:30px;">‚áÖ</th>
        <th>Skill</th>
        <th>Groups</th>
        <th style="width:40px;">üóëÔ∏è</th>
      </tr>
    </thead>
    <tbody id="skillCounts"></tbody>
  </table>

  <!-- The rest of your form fields -->
  <label>Intended Pyramid Range</label>
  <select id="pyramidRange">
    <option value="">--Select--</option>
    <option>Beginner: 0.0 - 1.0</option>
    <option>Intermediate: 1.25 - 3.25</option>
    <option>Advanced: 3.5 - 5.5</option>
    <option>Elite: 5.75 - 7.75</option>
    <option>Super Elite: 8.0 - 10.0</option>
  </select>

  <label>Pyramid Skills Description</label>
  <textarea id="pyramidSkills" rows="3"></textarea>

  <label>Intended Tumbling Range</label>
  <select id="tumblingRange">
    <option value="">--Select--</option>
    <option>0.0 - 1.0</option>
    <option>1.25 - 2.5</option>
    <option>2.75 - 4.0</option>
    <option>4.25 - 5.0</option>
  </select>

  <label>Team Majority Sync Sequence Description</label>
  <textarea id="teamSync" rows="3"></textarea>

  <label>Additional Tumbling Skills Description</label>
  <textarea id="additionalTumbling" rows="3"></textarea>

  <label>Intended Jump Range</label>
  <select id="jumpRange">
    <option value="">--Select--</option>
    <option>0.0 - 1.5</option>
    <option>1.75 - 2.75</option>
    <option>3.0 - 4.0</option>
    <option>4.25 - 4.75</option>
    <option>5.0</option>
  </select>

  <label>Jump Sequence Description</label>
  <textarea id="jumpSequence" rows="3"></textarea>

  <label>Any Legality Rulings from Bill Ahern?</label>
  <select id="legalityRulings">
    <option value="">--Select--</option>
    <option>Yes</option>
    <option>No</option>
  </select>

  <!-- Hidden Google Form Fields -->
  <textarea name="entry.853885754" id="gStuntSkills" style="display:none;"></textarea>
  <input type="hidden" name="entry.1305398481" id="gSchoolName">
  <input type="hidden" name="entry.1115196285" id="gTeamLevel">
  <input type="hidden" name="entry.1591826976" id="gNumAthletes">
  <input type="hidden" name="entry.213144247" id="gLocation">
  <input type="hidden" name="entry.350592538" id="gDate">
  <input type="hidden" name="entry.839382260" id="gStuntRange">
  <input type="hidden" name="entry.1261324678" id="gPyramidRange">
  <input type="hidden" name="entry.1334475235" id="gPyramidSkills">
  <input type="hidden" name="entry.1257575335" id="gTumblingRange">
  <input type="hidden" name="entry.1061923490" id="gTeamSync">
  <input type="hidden" name="entry.366964955" id="gAdditionalTumbling">
  <input type="hidden" name="entry.1517156909" id="gJumpRange">
  <input type="hidden" name="entry.1736401588" id="gJumpSequence">
  <input type="hidden" name="entry.815911308" id="gLegalityRulings">

  <div style="text-align: center; margin-top: 30px;">
    <button type="button" id="saveBtn" style="padding: 12px 20px; font-size: 16px;">Save & Submit</button>
  </div>

</form>

<pre id="output"></pre>
<iframe name="hidden_iframe" style="display:none;"></iframe>

<script>
const regions = [
  { id: 'i1', skill: 'Connected Inversions - Prep Level and Below to Below Prep' },
  { id: 'i2', skill: 'Below Prep Level Inversions to Ground' },
  { id: 'i3', skill: 'Released Inversion Prep Level or Below to Below Prep' },
  { id: 'i4', skill: 'Connected Inversions - Prep Level and Below to Prep' },
  { id: 'r1', skill: 'Release to Below Prep' },
  { id: 'r2', skill: 'Horizontal Releases to Below Prep' },
  { id: 'r3', skill: 'Extended Release to Below Prep' },
  { id: 't1', skill: '1/4 or 1/2 Up to Prep Level' },
  { id: 't2', skill: '1/4 Up to Extended' },
  { id: 't3', skill: '1/4 or 1/2 Twisting Transitions' },
  { id: 'c1', skill: 'Single Base at Prep Level' },
  { id: 'c2', skill: 'Assisted Coed Skills to Prep' },
  { id: 'c3', skill: 'Assisted Walk-In/Toss to Chair' },
  { id: 'o1', skill: 'Prep Level and Below Stunts Not Previously Categorized' },
  { id: 'o2', skill: 'Straight Ride or Pretty Girl Tosses' },
  { id: 'o3', skill: 'Single Skill Tosses' },
  { id: 'h1', skill: 'TEST' },
  { id: 'h2', skill: 'TEST' },
  { id: 'h3', skill: 'TEST' }
];

const wrapper = document.querySelector('.wrapper');
const skillCountsContainer = document.getElementById('skillCounts');

wrapper.addEventListener('click', e => {
  const rect = wrapper.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;

  for (let r of regions) {
    const box = document.getElementById(r.id);
    const left = parseFloat(box.style.left);
    const top = parseFloat(box.style.top);
    const width = parseFloat(box.style.width);
    const height = parseFloat(box.style.height);

    if (x >= left && x <= left + width && y >= top && y <= top + height) {

      // flash highlight
      box.style.display = "block";
      setTimeout(() => box.style.display = "none", 150);

      // Create a draggable new row
      const uid = crypto.randomUUID();
      const row = document.createElement('tr');
      row.id = uid;
      row.classList.add("draggable-row");
      row.setAttribute("draggable", "true");

      row.innerHTML = `
        <td>‚£ø <span class="skillName">${r.skill}</span></td>
        <td><input type="number" min="1" value="1" class="skillCount"></td>
        <td><button type="button" onclick="this.parentNode.parentNode.remove()">üóëÔ∏è</button></td>
      `;

      skillCountsContainer.appendChild(row);

      break;
    }
  }
});

document.getElementById('saveBtn').addEventListener('click', () => {
  let out = 'Selected VHSL Stunt Rubric Skills:\n\n';
  const rows = skillCountsContainer.querySelectorAll('tr');

  if (rows.length === 0) out += '(None selected)';
  else rows.forEach(row => {
    const skill = row.querySelector('.skillName').textContent;
    const count = row.querySelector('input').value;
    out += `${count} ‚Äî ${skill}\n`;
  });

  document.getElementById('output').textContent = out;

  // Hidden Google form fields
  document.getElementById('gStuntSkills').value = out;
  document.getElementById('gSchoolName').value = schoolName.value;
  document.getElementById('gTeamLevel').value = teamLevel.value;
  document.getElementById('gNumAthletes').value = numAthletes.value;
  document.getElementById('gLocation').value = competitionLocation.value;
  document.getElementById('gDate').value = competitionDate.value;
  document.getElementById('gStuntRange').value = stuntRange.value;
  document.getElementById('gPyramidRange').value = pyramidRange.value;
  document.getElementById('gPyramidSkills').value = pyramidSkills.value;
  document.getElementById('gTumblingRange').value = tumblingRange.value;
  document.getElementById('gTeamSync').value = teamSync.value;
  document.getElementById('gAdditionalTumbling').value = additionalTumbling.value;
  document.getElementById('gJumpRange').value = jumpRange.value;
  document.getElementById('gJumpSequence').value = jumpSequence.value;
  document.getElementById('gLegalityRulings').value = legalityRulings.value;

  document.getElementById('fullForm').submit();
});
</script>

</body>
</html>


