<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>VHSL Cheer Rubric – Highlight + Dynamic Counts</title>
<style>
  body { 
    font-family: Arial, sans-serif; 
    text-align: center; 
    margin: 30px; 
    background: #fafafa; 
  }
  h1 { color: #800000; }
  .wrapper { 
    position: relative; 
    display: inline-block; 
  }
  #rubricImage { 
    width: 90%; 
    max-width: 950px; 
    display: block; 
  }

  .highlight {
    position: absolute;
    border: 2px solid transparent;
    background-color: transparent;
    pointer-events: none;
    display: none;
  }
  /* Category color codes */
  .twisting { border-color: rgba(255,0,0,0.8); background-color: rgba(255,0,0,0.25); }
  .coed     { border-color: rgba(0,0,255,0.8); background-color: rgba(0,0,255,0.25); }
  .release  { border-color: rgba(0,180,0,0.8); background-color: rgba(0,180,0,0.25); }
  .inversion{ border-color: rgba(180,0,180,0.8); background-color: rgba(180,0,180,0.25); }
  .toss     { border-color: rgba(255,120,0,0.8); background-color: rgba(255,120,0,0.25); }

  button {
    margin-top: 20px; 
    padding: 10px 16px;
    background: #800000; 
    color: white;
    border: none; 
    border-radius: 5px; 
    cursor: pointer;
  }
  button:hover { background: #a00000; }

  #output {
    margin-top: 25px;
    background: #f7f7f7;
    padding: 15px;
    border-radius: 6px;
    width: 90%;
    max-width: 950px;
    text-align: left;
    white-space: pre-wrap;
  }

    h2 { color: #444; margin-top: 40px; }

  /* Table layout for skills and counts */
  #skillCountsTable {
    width: 50%;
    max-width: 950px;
    margin: 20px auto;
    border-collapse: collapse;
  }
  #skillCountsTable td {
    padding: 8px 10px;
    vertical-align: middle;
  }
#skillCountsTable td:first-child {
  text-align: left;
  white-space: normal;   /* allows wrapping on small screens */
  word-break: break-word;
}
  #skillCountsTable input {
    width: 80px;
    text-align: center;
  }
</style>
</head>
<body>

<h1>VHSL Competitive Cheer Rubric – Highlight + Counts</h1>
<p>Click on the rubric image to select skills. Inputs will appear below for selected skills.</p>

<div class="wrapper">
  <img id="rubricImage" src="Stunt_Rubric.png" alt="VHSL Rubric">

  <!-- Original 3 highlights -->
  <div class="highlight inversion" id="i1" style="left:62px; top:131px; width:146px; height:17px;"></div>
  <div class="highlight inversion" id="i2" style="left:62px; top:150px; width:146px; height:18px;"></div>
  <div class="highlight inversion" id="i3" style="left:62px; top:169px; width:146px; height:17px;"></div>
  <div class="highlight inversion" id="i4" style="left:209px; top:131px; width:146px; height:17px;"></div>

  <!-- 15 additional example highlight boxes -->
  <div class="highlight release" id="r1" style="left:62px; top:217px; width:146px; height:15px;"></div>
  <div class="highlight release" id="r2" style="left:62px; top:233px; width:146px; height:13px;"></div>
  <div class="highlight release" id="r3" style="left:62px; top:280px; width:146px; height:14px;"></div>
  
  
  <div class="highlight twisting" id="t1" style="left:62px; top:335px; width:146px; height:7px;"></div>
  <div class="highlight twisting" id="t2" style="left:62px; top:342px; width:146px; height:14px;"></div>
  <div class="highlight twisting" id="t3" style="left:62px; top:356px; width:146px; height:15px;"></div>
  
  
  <div class="highlight coed" id="c1" style="left:62px; top:410px; width:146px; height:14px;"></div>
  <div class="highlight coed" id="c2" style="left:62px; top:439px; width:146px; height:15px;"></div>
  <div class="highlight coed" id="c3" style="left:62px; top:455px; width:146px; height:15px;"></div>
  
  
  <div class="highlight toss" id="o1" style="left:62px; top:555px; width:146px; height:15px;"></div>
  <div class="highlight toss" id="o2" style="left:62px; top:582px; width:146px; height:21px;"></div>
  <div class="highlight toss" id="o3" style="left:62px; top:600px; width:146px; height:15px;"></div>
  
  <div class="highlight inversion" id="h1" style="left:140px; top:550px; width:180px; height:20px;"></div>
  <div class="highlight release" id="h2" style="left:330px; top:550px; width:180px; height:20px;"></div>
  <div class="highlight twisting" id="h3" style="left:630px; top:550px; width:180px; height:20px;"></div>
</div>

<h2>Enter Number of Groups for Each Selected Skill</h2>
<table id="skillCountsTable">
  <tbody id="skillCounts"></tbody>
</table>

<button id="saveBtn">Save Results</button>
<pre id="output"></pre>

<script>
// Define all 18 skills
const regions = [
  { id: 'i1', skill: 'Connected Inversions - Prep Level and Below to Below Prep', category: 'Inversion' },
  { id: 'i2', skill: 'Below Prep Level Inversions to Ground', category: 'Inversion' },
  { id: 'i3', skill: 'Released Inversion Prep Level or Below to Below Prep', category: 'Inversion' },
  { id: 'i4', skill: 'Connected Inversions - Prep Level and Below to Prep', category: 'Inversion' },
  { id: 'r1', skill: 'Release to Below Prep', category: 'Release' },
  { id: 'r2', skill: 'Horizontal Releases to Below Prep', category: 'Release' },
  { id: 'r3', skill: 'Extended Release to Below Prep', category: 'Release' },
  { id: 't1', skill: '1/4 or 1/2 Up to Prep Level', category: 'Twisting' },
  { id: 't2', skill: '1/4 Up to Extended', category: 'Twisting' },
  { id: 't3', skill: '1/4 or 1/2 Twisting Transitions', category: 'Twisting' },
  { id: 'c1', skill: 'Single Base at Prep Level', category: 'Coed' },
  { id: 'c2', skill: 'Assisted Coed Skills to Prep', category: 'Coed' },
  { id: 'c3', skill: 'Assisted Walk-In/Toss to Chair', category: 'Coed' },
  { id: 'o1', skill: 'Prep Level and Below Stunts Not Previously Categorized', category: 'Toss' },
  { id: 'o2', skill: 'Straight Ride or Pretty Girl Tosses', category: 'Toss' },
  { id: 'o3', skill: 'Single Skill Tosses', category: 'Toss' },
  { id: 'h1', skill: 'TEST', category: 'Inversion' },
  { id: 'h2', skill: 'TEST', category: 'Release' },
  { id: 'h3', skill: 'TEST', category: 'Twisting' }
];

const selected = new Set();
const wrapper = document.querySelector('.wrapper');
const skillCountsContainer = document.getElementById('skillCounts');

// Highlight click + dynamic input
wrapper.addEventListener('click', e => {
  const rect = wrapper.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;

  for (let r of regions) {
    const box = document.getElementById(r.id);
    const left = parseFloat(box.style.left);
    const top = parseFloat(box.style.top);
    const width = parseFloat(box.style.width);
    const height = parseFloat(box.style.height);

    if (x >= left && x <= left + width && y >= top && y <= top + height) {
      const skillId = 'count_' + r.id;

      if (selected.has(r.skill)) {
        // Deselect: remove highlight + input row
        selected.delete(r.skill);
        box.style.display = 'none';
        const row = document.getElementById(skillId + '_div');
        if (row) skillCountsContainer.removeChild(row);
      } else {
        // Select: show highlight + add table row
        selected.add(r.skill);
        box.style.display = 'block';

        if (!document.getElementById(skillId + '_div')) {
          const row = document.createElement('tr');
          row.id = skillId + '_div';
          row.innerHTML = `<td>${r.skill}</td>
                           <td><input type="number" id="${skillId}" min="0" value="0"></td>`;
          skillCountsContainer.appendChild(row);
        }
      }
      break;
    }
  }
});

// Function to submit output to Google Form
function submitToGoogleForm(outputText) {
  const formURL = "https://docs.google.com/forms/d/e/1FAIpQLSfQ3lyxpqbB0ej3RfpUok4s02UNwSfFExRDta7rATeTuqEg2g/formResponse"; // replace <FORM_ID>
  const data = new FormData();
  data.append("entry.853885754", outputText); // replace with your field ID

  fetch(formURL, {
    method: "POST",
    mode: "no-cors",
    body: data
  }).then(() => {
    alert("Results submitted to Google Form!");
  }).catch((err) => console.error(err));
}

// Save button: output + submit
document.getElementById('saveBtn').addEventListener('click', () => {
  let out = 'Selected VHSL Stunt Rubric Skills:\n\n';
  if (selected.size === 0) out += '(None selected)';
  else selected.forEach(skill => {
    const region = regions.find(r => r.skill === skill);
    const countInput = document.getElementById('count_' + region.id);
    const count = countInput ? countInput.value : 0;
    out += `• ${skill} — Count: ${count}\n`;
  });

  document.getElementById('output').textContent = out;

  // Submit to Google Form
  submitToGoogleForm(out);
});
</script>

</body>
</html>

